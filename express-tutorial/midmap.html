<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>어디서 뭐하지</title>
  <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&format=javascript&appkey=e6357d93-56be-48cb-8d35-5079d5fc8b3e"></script>
  <link href="./css/midmapc.css" rel="stylesheet">
</head>

<body>
  <div id="map_div"></div>
  <div class="btn1">
    <button class="button1" onclick="location.href='place'">
      뭐하지
    </button>
  </div>
</body>

<script>
  var map, marker;
  var label;
  var middle = new Array();

  //계산할 좌표들을 전 단계에서 전달받아야 함. 무슨 변수로 전달할지 결정 필요
  var testLa = new Array();
  var testLo = new Array();
  middle[0] = 0;
  middle[1] = 0;
  testLa[0] = 37.462835;
  testLo[0] = 126.908194;
  testLa[1] = 37.500144;
  testLo[1] = 127.005329;
  testLa[2] = 37.592527;
  testLo[2] = 127.016944;
  // 페이지가 로딩이 된 후 호출하는 함수입니다.
  function initTmap() {
    // map 생성
    // Tmapv2.Map을 이용하여, 지도가 들어갈 div, 넓이, 높이를 설정합니다.
    computeMiddle();
    map = new Tmapv2.Map("map_div", // "map_div" : 지도가 표시될 div의 id
      {
        center: new Tmapv2.LatLng(middle[0], middle[1]), //(middle[0],middle[1]),//(37.566481622437934,126.98502302169841), // 지도 초기 좌표
        width: "100vw", // map의 width 설정
        height: "100vh" // map의 height 설정
      });

    var positions = [ //다중 마커 저장 배열
      {
        title: '중간 지점',
        lonlat: new Tmapv2.LatLng(middle[0], middle[1]) //좌표 지정
      },
      {
        title: '박지수',
        lonlat: new Tmapv2.LatLng(testLa[0], testLo[0])
      },
      {
        title: '문경환',
        lonlat: new Tmapv2.LatLng(testLa[1], testLo[1])
      },
      {
        title: '지정환',
        lonlat: new Tmapv2.LatLng(testLa[2], testLo[2])
      }
    ];

    for (var i = 0; i < positions.length; i++) { //for문을 통하여 배열 안에 있는 값을 마커 생성
      var lonlat = positions[i].lonlat;
      var title = positions[i].title;
      label = "<span style='background-color: rgb(45, 62, 80); color:white'>" + title + "</span>";
      //Marker 객체 생성.
      marker = new Tmapv2.Marker({
        position: lonlat, //Marker의 중심좌표 설정.
        map: map, //Marker가 표시될 Map 설정.
        title: title, //Marker 타이틀.
        label: label //Marker의 라벨.
      });
    }
    map.setZoom(13);
  }

  function computeMiddle() {
    /*middle[0]=37.566481622437934;
    middle[1]=126.98502302169841;*/
    var i;
    for (i = 0; i < 3; i++) {
      middle[0] += testLa[i];
    }
    middle[0] /= 3;
    for (i = 0; i < 3; i++) {
      middle[1] += testLo[i];
    }
    middle[1] /= 3;
    document.write("위도 : ", middle[0], ", 경도 : ", middle[1]);
  }
  // 맵 생성 실행
  initTmap();
</script>

</html>
